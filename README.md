# 协议
包头只由一个字节组成，标志着报文类型：前三位指示操作类型，后五位指示具体操作or状态

操作类型：连接、账户操作、文件传输

| 标志            | 类型     | 发送方        | 含义                  | 备注                    |
| --------------- | -------- | ------------- | --------------------- | ----------------------- |
| 00000000 - 0x00 | 连接     | server        | 连接已初始化          | 建立连接+会话密钥初始化 |
| 00011111 - 0x1f | 连接     | server/client | 关闭连接              |                         |
| 00100000 - 0x20 | 账户操作 | server        | 操作成功              |                         |
| 00111111 - 0x3f | 账户操作 | server        | 操作失败              | 未使用                  |
| 00100001 - 0x21 | 账户操作 | client        | 注册                  |                         |
| 00100010 - 0x22 | 账户操作 | server        | 用户名已存在          |                         |
| 00100011 - 0x23 | 账户操作 | server        | 用户名/密码格式不合法 |                         |
| 00100100 - 0x24 | 账户操作 | client        | 登录                  |                         |
| 00100101 - 0x25 | 账户操作 | server        | 用户名/密码错误       |                         |
|                 |          |               |                       |                         |
|                 |          |               |                       |                         |
|                 |          |               |                       |                         |
|                 |          |               |                       |                         |

# Security Point

1. 由于前端可以抓包修改传输数据，因此都在后端进行严格的输入校验
   1. 后端先要判断加密的数据长度，在判断解密后数据的长度
2. 无论是用户名不存在/密码输入错误，都只显示“用户名或密码错误”
3. 数据传输一次一密
   1. 使用AES的EAX模式
   2. 使用nonce随机数，存在完整性校验